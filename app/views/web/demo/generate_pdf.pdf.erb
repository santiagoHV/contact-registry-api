<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Contactos Agrupados por Ciudad</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>

</head>
<body>
<h1>Contactos Agrupados por Ciudad</h1>

<% @grouped_contacts.each do |city_group| %>
  <% if city_group[:contacts].empty? %>

  <% else %>
  <h2><%= city_group[:city] %></h2>
  <table class="table table-striped">
    <thead>
    <tr>
      <th>Id</th>
      <th>Nombre</th>
      <th>Apellido</th>
      <th>Fecha de nacimiento</th>
      <th>Direcci√≥n</th>
      <th>Casa/apartamento</th>
    </tr>
    </thead>
    <% city_group[:contacts].each do |contact| %>
      <tr id="contact-<%= contact[:id] %>">
        <td><%= contact[:id] %></td>
        <td><%= contact[:name] %></td>
        <td><%= contact[:lastname] %></td>
        <td><%= contact[:birthdate] %></td>
        <td><%= contact[:address] %></td>
        <td><%= contact[:detail] %></td>
      </tr>
    <% end %>
  </table>
  <% end %>
<% end %>

</body>
</html>